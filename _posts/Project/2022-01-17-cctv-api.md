---
title:  "[CCTV API: íŒŒì´ì¬] ìœ„ë„, ê²½ë„ ì¢Œí‘œë¡œ ê°€ê¹Œìš´ CCTV ì°¾ì•„ì„œ ì˜ìƒ ì‹¤í–‰í•˜ê¸°" 

categories:
  -  Project 
tags:
  - [Python, Json]

toc: true
toc_sticky: true

date: 2022-01-17
last_modified_at: 2022-01-17
---

ğŸ”” 'êµ­ê°€êµí†µì •ë³´ì„¼í„°'ì—ì„œ ì œê³µí•˜ëŠ” ì‹¤ì‹œê°„ CCTV ì˜ìƒ APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## 1ï¸âƒ£ êµ­ê°€êµí†µì •ë³´ì„¼í„° ê°€ì…í•˜ê¸°

1. <https://www.its.go.kr> ì£¼ì†Œì— ì ‘ì†í•˜ì—¬ íšŒì›ê°€ì…
2. ë§ˆì´í˜ì´ì§€ -> ì¸ì¦í‚¤ ë°œê¸‰í˜„í™© -> ì¸ì¦í‚¤ ì‹ ì²­

![ì¸ì¦í‚¤ ë°œê¸‰](https://user-images.githubusercontent.com/45157347/149726458-45b448b8-0405-40a3-bb87-0fc30e0fdc63.JPG)
* ìœ„ì™€ ê°™ì´ ì‹ ì²­


<br>

## 2ï¸âƒ£ CCTV APIë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•

* <https://www.its.go.kr/opendata/opendataList?service=cctv> (CCTV API ìƒì„¸ì •ë³´)


```python
import requests
import numpy as np

def get_cctv_url(lat, lng):
    # CCTV íƒìƒ‰ ë²”ìœ„ ì§€ì •ì„ ìœ„í•´ ì„ì˜ë¡œ Â±1 ë§Œí¼ ê°€ê°
    minX = str(lng-1)
    maxX = str(lng+1)
    minY = str(lat-1)
    maxY = str(lat+1)

    # ê°œì¸key ì…ë ¥
    api_call = 'https://openapi.its.go.kr:9443/cctvInfo?' \
               'apiKey=ê°œì¸key' \
               '&type=ex&cctvType=2' \
               '&minX=' + minX + \
               '&maxX=' + maxX + \
               '&minY=' + minY + \
               '&maxY=' + maxY + \
               '&getType=json'

    w_dataset = requests.get(api_call).json()
    cctv_data = w_dataset['response']['data']

    coordx_list = []
    for index, data in enumerate(cctv_data):
        xy_couple = (float(cctv_data[index]['coordy']),float(cctv_data[index]['coordx']))
        coordx_list.append(xy_couple)

    # ì…ë ¥í•œ ìœ„ê²½ë„ ì¢Œí‘œì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ìœ„ì¹˜ì— ìˆëŠ” CCTVë¥¼ ì°¾ëŠ” ê³¼ì •
    coordx_list = np.array(coordx_list)
    leftbottom = np.array((lat, lng))
    distances = np.linalg.norm(coordx_list - leftbottom, axis=1)
    min_index = np.argmin(distances)

    return cctv_data[min_index]


cctv_data = get_cctv_url(36.58629, 128.186793)
print('CCTVëª…:', cctv_data['cctvname']) # ê°€ì¥ ê°€ê¹Œìš´ CCTVëª…
print('CCTV ì˜ìƒ URL:', cctv_data['cctvurl']) # ê°€ì¥ ê°€ê¹Œìš´ CCTV ì˜ìƒ URL
```

<br>

## 3ï¸âƒ£ ì‹¤í–‰ ê²°ê³¼
```json
CCTVëª…: [ì¤‘ë¶€ë‚´ë¥™ì„ ] ë‚˜í•œêµ
CCTV ì˜ìƒ URL: http://cctvsec.ktict.co.kr/3995/lEHcZVOck0b17lTdDibqNhuCCHJ6E3LunVkoMo42+gtLvmR2wIyNknswB/5iLyTrVT7s0OHvryYUGpsmLFIl0w==
```

![cctv](https://user-images.githubusercontent.com/45157347/149728086-6de5d177-6b31-4c7d-864a-10caa81c6921.JPG)

ì…ë ¥ ì¢Œí‘œì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ìœ„ì¹˜ì— ìˆëŠ” CCTVë¥¼ íƒìƒ‰í•˜ì—¬ ê²°ê³¼ë¡œ ì¶œë ¥í•˜ëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ë˜í•œ, URLë¡œ ì ‘ì†í•˜ë©´ 30ì´ˆ ë‹¨ìœ„ë¡œ ì œê³µë˜ëŠ” ì‹¤ì‹œê°„ CCTV ì˜ìƒì„ ì‹œì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

***
<br>

    ğŸ’¾ ê³µë¶€í•œ ë‚´ìš©ì„ ê¸°ë¡í•˜ê¸° ìœ„í•œ ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.
    ğŸ“„ ì˜¤ë¥˜ì™€ ì§ˆë¬¸ì€ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}