---
title:  "[ê¸°ìƒì²­ API] OpenWeatherMap ì˜¤í”ˆì›¨ë”ë§µ API í˜¸ì¶œí•˜ê¸° (2)" 

categories:
  -  Project 
tags:
  - [Python, Json]

toc: true
toc_sticky: true

date: 2022-01-06
last_modified_at: 2022-01-06
---

ğŸ”” í˜¸ì¶œí•œ OpenWeatherMap apië¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.  
ğŸ“Œ OpenWeatherMap ê°€ì… ë° API í˜¸ì¶œ ê³¼ì •ì€ ì´ì „ ê²Œì‹œê¸€ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.

## 1ï¸âƒ£ í˜¸ì¶œ ê²°ê³¼ê°’ JSON
pprin t.pprint(w_dataset) ì¦‰, í˜¸ì¶œëœ jsonì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```json
{'current': {'clouds': 0,        
             'dew_point': 265.84,
             'dt': 1641442597,   
             'feels_like': 274.68,
             'humidity': 38,
             'pressure': 1028,
             'sunrise': 1641422582,
             'sunset': 1641457956,
             'temp': 278.05,
             'uvi': 1.98,
             'visibility': 10000,
             'weather': [{'description': 'ë§‘ìŒ',
                          'icon': '01d',
                          'id': 800,
                          'main': 'Clear'}],
             'wind_deg': 344,
             'wind_gust': 6.12,
             'wind_speed': 4.37},
 'hourly': [{'clouds': 0,
             'dew_point': 265.84,
             'dt': 1641441600,
             'feels_like': 274.68,
             'humidity': 38,
             'pop': 0,
             'pressure': 1028,
             'temp': 278.05,
             'uvi': 1.98,
             'visibility': 10000,
             'weather': [{'description': 'ë§‘ìŒ',
                          'icon': '01d',
                          'id': 800,
                          'main': 'Clear'}],
             'wind_deg': 344,
             'wind_gust': 6.12,
             'wind_speed': 4.37},
            {'clouds': 0,
             'dew_point': 265.79,
             'dt': 1641445200,
             'feels_like': 274.38,
             'humidity': 38,
             'pop': 0,
             'pressure': 1028,
             'temp': 277.98,
             'uvi': 1.59,
             'visibility': 10000,
             'weather': [{'description': 'ë§‘ìŒ',
                          'icon': '01d',
                          'id': 800,
                          'main': 'Clear'}],
             'wind_deg': 340,
             'wind_gust': 6.46,
             'wind_speed': 4.78}, 
             
             ì´í•˜ ìƒëµ Â·Â·Â·
```

í˜„ì¬ ë‚ ì”¨ëŠ” currentë¥¼, 1ì‹œê°„ ê°„ê²©ì˜ ì˜ˆë³´ëŠ” hourlyë¥¼ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.  

pop : ê°•ìˆ˜í™•ë¥   
temp : ê¸°ì˜¨  
weather-icon : ë‚ ì”¨ ì½”ë“œ(ë‚ ì”¨ ì•„ì´ì½˜ ì´ë¯¸ì§€ í˜¸ì¶œì— ì‚¬ìš©ë¨)   
weather-main : ë‚ ì”¨  

<br>

## 2ï¸âƒ£ JSON ë°ì´í„° ë‹¤ë£¨ê¸°

í˜¸ì¶œëœ JSON ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²• ë˜í•œ í˜¸ì¶œë§Œí¼ ê°„ë‹¨í•©ë‹ˆë‹¤.

ìš°ì„ , í¬ê²Œ current ë°ì´í„°(í˜„ì¬ ë‚ ì”¨)ì™€ hourly ë°ì´í„°(ì‹œê°„ë³„ ì˜ˆë³´)ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.  

### 1. í˜„ì¬ ë‚ ì”¨ ë°ì´í„°
**í˜„ì¬ ë‚ ì”¨ ëª¨ë‘ë¥¼ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´** ë‹¤ìŒê³¼ ê°™ì´ JSON ë°ì´í„° w_datasetì—ì„œ current ë°ì´í„°ë§Œ ê³¨ë¼ë‚´ë©´ ë©ë‹ˆë‹¤.

```python
w_dataset['current']
```


**í˜„ì¬ ë‚ ì”¨ì—ì„œ ê¸°ì˜¨ì„ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´**

```python
w_dataset['current']['temp']
```


**í˜„ì¬ ë‚ ì”¨(ê¸°ìƒ)**ë„ ë§ˆì°¬ê°€ì§€ë¡œ ìˆœì„œëŒ€ë¡œ ë‚´ë ¤ê°€ë©´ ë©ë‹ˆë‹¤.  
ë‹¨, weatherì˜ ê°’ì€ ë°°ì—´(0ë²ˆ ë°°ì—´ë§Œ ì¡´ì¬)ë¡œ ë˜ì–´ìˆì–´ì„œ [0]['main']ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.

```python
w_dataset['current']['weather'][0]['main']
```

<br>

### 2. ì‹œê°„ë³„ ì˜ˆë³´ ë°ì´í„°
ì‹œê°„ë³„ ì˜ˆë³´ hourlyë„ ë¹„ìŠ·í•©ë‹ˆë‹¤.  
ìš°ì„  hourlyë¥¼ ì„ íƒí•œ ë‹¤ìŒ ì–´ëŠ ì‹œê°„ì˜ ì˜ˆë³´ë¥¼ ì„ íƒí• ì§€ ì •í•´ì•¼ í•©ë‹ˆë‹¤.  
**ì‹œê°„ë³„ ì˜ˆë³´**ëŠ” ë°°ì—´ì˜ ê° ì¸ë±ìŠ¤ì— ìˆê¸° ë•Œë¬¸ì— ë‹¤ìŒ ìˆœì„œë¡œ ì„ íƒí•©ë‹ˆë‹¤.  
[ì˜ˆë³´]->[ì‹œê°„ ì¸ë±ìŠ¤ ë²ˆí˜¸]->[weatherë°ì´í„°][0]->[mainë°ì´í„°]

```python
w_dataset['hourly'][11]
```

â­ current ë°ì´í„°ê°€ í˜„ì¬ ì‹œê°ì´ê¸° ë•Œë¬¸ì— horulyì˜ 0ë²ˆ ì¸ë±ìŠ¤ê°€ 1ì‹œê°„ ë’¤ì˜ ì˜ˆë³´ì…ë‹ˆë‹¤.    
ë”°ë¼ì„œ **w_dataset['hourly'][11]**ëŠ” 12ì‹œê°„ ë’¤ì˜ ì˜ˆë³´ ë°ì´í„°ì…ë‹ˆë‹¤. â­

**ë‚ ì”¨(ê¸°ìƒ)** ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ê²ƒë„ ë§ˆì°¬ê°€ì§€ë¡œ ì•„ë˜ì²˜ëŸ¼ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
```python
w_dataset['hourly'][11]['weather'][0]['main']
```

<br>

### 3. ë‚ ì§œ í˜•ì‹ ë³€í™˜
JSON ë°ì´í„°ë¥¼ ìœ ì‹¬íˆ ë³´ì‹  ë¶„ë“¤ì€ ëˆˆì¹˜ì±„ì…¨ê² ì§€ë§Œ ë‚ ì§œì˜ í˜•ì‹ì´ í‰ì†Œ ì‚¬ìš©í•˜ë˜ ê²ƒê³¼ëŠ” ë‹¬ë¼ ì•Œì•„ë³¼ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.
ì¸ë±ìŠ¤ ë²ˆí˜¸ë¡œ ì‹œê°„ì„ ìœ ì¶”í•˜ëŠ” ë°©ë²•ë„ ìˆê² ì§€ë§Œ ì €ëŠ” ì´ê²ƒì„ **'2022-01-06 12:00'**ì²˜ëŸ¼ ì¶”í›„ì— ì‚¬ìš©í•˜ê¸° ì‰½ë„ë¡ í˜•ì‹ì„ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.

ë°˜ë³µë¬¸ì„ ëŒë¦¬ë©´ì„œ ì•„ë˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜•ë³€í™˜ì„ í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.
í˜•ì‹ì„ 
```python
import time

def epochtime_to_datetime(epoch_time):
    time_formatted = time.strftime('%Y-%m-%d %H:%M', time.localtime(epoch_time))
    return time_formatted
```




***
<br>

    ğŸ’¾ ê³µë¶€í•œ ë‚´ìš©ì„ ê¸°ë¡í•˜ê¸° ìœ„í•œ ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.
    ğŸ“„ ì˜¤ë¥˜ì™€ ì§ˆë¬¸ì€ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}